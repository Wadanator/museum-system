{
  "sceneId": "relays_media_stress_test_v4",
  "description": "Test rel\u00e9 (Dymostroje, Ohe\u0148, Svetl\u00e1) a m\u00e9di\u00ed pod\u013ea aktu\u00e1lneho HW",
  "version": "2.1",
  "initialState": "intro",
  "globalEvents": [
    {
      "type": "mqttMessage",
      "topic": "room1/emergency",
      "message": "STOP",
      "goto": "END"
    },
    {
      "type": "timeout",
      "delay": 300,
      "goto": "END"
    }
  ],
  "states": {
    "intro": {
      "description": "\u0160tart Audia, zapnutie Oh\u0148a a Svetla 1",
      "onEnter": [
        {
          "action": "audio",
          "message": "PLAY:welcome.mp3:0.8"
        },
        {
          "action": "mqtt",
          "topic": "room1/light/fire",
          "message": "ON"
        },
        {
          "action": "mqtt",
          "topic": "room1/light/1",
          "message": "ON"
        }
      ],
      "transitions": [
        {
          "type": "timeout",
          "delay": 5,
          "goto": "smoke_show"
        }
      ]
    },
    "smoke_show": {
      "description": "\u0160tart Videa a test oboch dymostrojov",
      "onEnter": [
        {
          "action": "video",
          "message": "PLAY_VIDEO:ghost2.mp4"
        },
        {
          "action": "mqtt",
          "topic": "room1/effect/smoke_ON",
          "message": "ON"
        }
      ],
      "timeline": [
        {
          "at": 2.5,
          "action": "mqtt",
          "topic": "room1/effect/smoke",
          "message": "ON"
        },
        {
          "at": 6,
          "action": "mqtt",
          "topic": "room1/effect/smoke_ON",
          "message": "OFF"
        },
        {
          "at": 8,
          "action": "mqtt",
          "topic": "room1/light/2",
          "message": "ON"
        }
      ],
      "transitions": [
        {
          "type": "timeout",
          "delay": 15,
          "goto": "light_sequence"
        }
      ]
    },
    "light_sequence": {
      "description": "Postupn\u00e9 sp\u00ednanie svetiel 3, 4, 5",
      "onEnter": [
        {
          "action": "mqtt",
          "topic": "room1/light/3",
          "message": "ON"
        }
      ],
      "timeline": [
        {
          "at": 2,
          "action": "mqtt",
          "topic": "room1/light/4",
          "message": "ON"
        },
        {
          "at": 4,
          "action": "mqtt",
          "topic": "room1/light/5",
          "message": "ON"
        },
        {
          "at": 6,
          "action": "mqtt",
          "topic": "room1/light/fire",
          "message": "OFF"
        }
      ],
      "transitions": [
        {
          "type": "timeout",
          "delay": 10,
          "goto": "final_stop"
        }
      ]
    },
    "final_stop": {
      "description": "Hromadn\u00e9 vypnutie a koniec",
      "onEnter": [
        {
          "action": "mqtt",
          "topic": "room1/STOP",
          "message": "TRUE"
        }
      ],
      "timeline": [
        {
          "at": 1,
          "action": "audio",
          "message": "STOP"
        },
        {
          "at": 1.5,
          "action": "video",
          "message": "STOP_VIDEO"
        }
      ],
      "transitions": [
        {
          "type": "timeout",
          "delay": 4,
          "goto": "END"
        }
      ]
    }
  }
}