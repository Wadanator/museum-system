<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Museum Control Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .status-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .status-card:hover {
            transform: translateY(-5px);
        }
        
        .status-card.active {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }
        
        .status-card.inactive {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }
        
        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .room-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-left: 5px solid #667eea;
        }
        
        .room-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .room-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
        }
        
        .room-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .room-status.running {
            background: #4CAF50;
            color: white;
        }
        
        .room-status.idle {
            background: #FFC107;
            color: #333;
        }
        
        .device-list {
            margin-bottom: 20px;
        }
        
        .device {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 3px solid #007bff;
        }
        
        .device.online {
            border-left-color: #28a745;
        }
        
        .device.offline {
            border-left-color: #dc3545;
            opacity: 0.6;
        }
        
        .device-status {
            font-size: 0.8em;
            padding: 3px 8px;
            border-radius: 15px;
        }
        
        .device-status.online {
            background: #d4edda;
            color: #155724;
        }
        
        .device-status.offline {
            background: #f8d7da;
            color: #721c24;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #333;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .scene-editor {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        .scene-editor h2 {
            margin-bottom: 20px;
            color: #333;
        }
        
        .scene-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .scene-preview {
            grid-column: 1 / -1;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .scene-preview h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .scene-timeline {
            background: white;
            border-radius: 10px;
            padding: 15px;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border-radius: 8px;
        }
        
        .timeline-time {
            font-weight: bold;
            min-width: 60px;
        }
        
        .timeline-action {
            flex: 1;
            margin-left: 15px;
        }
        
        .mqtt-monitor {
            background: #1a1a1a;
            color: #00ff00;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .mqtt-monitor h3 {
            color: #fff;
            margin-bottom: 15px;
        }
        
        .mqtt-message {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #00ff00;
            padding-left: 10px;
        }
        
        .mqtt-timestamp {
            color: #888;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèõÔ∏è Museum Control Dashboard</h1>
            <p>Centr√°lne riadenie automatizovan√©ho m√∫zea</p>
        </div>
        
        <div class="status-overview">
            <div class="status-card active">
                <h3>Akt√≠vne miestnosti</h3>
                <div style="font-size: 2em; margin: 10px 0;">7/10</div>
                <p>Miestnosti online</p>
            </div>
            <div class="status-card active">
                <h3>Spusten√© sc√©ny</h3>
                <div style="font-size: 2em; margin: 10px 0;">3</div>
                <p>Pr√°ve be≈æia</p>
            </div>
            <div class="status-card inactive">
                <h3>Offline zariadenia</h3>
                <div style="font-size: 2em; margin: 10px 0;">2</div>
                <p>Vy≈æaduj√∫ pozornos≈•</p>
            </div>
            <div class="status-card active">
                <h3>MQTT spr√°vy/min</h3>
                <div style="font-size: 2em; margin: 10px 0;">42</div>
                <p>Komunik√°cia</p>
            </div>
        </div>
        
        <div class="rooms-grid">
            <div class="room-card">
                <div class="room-header">
                    <div class="room-title">Miestnos≈• 1 - √övod</div>
                    <div class="room-status running">Be≈æ√≠ sc√©na</div>
                </div>
                <div class="device-list">
                    <div class="device online">
                        <span>üí° LED Svetla</span>
                        <span class="device-status online">Online</span>
                    </div>
                    <div class="device online">
                        <span>üîä Audio System</span>
                        <span class="device-status online">Online</span>
                    </div>
                    <div class="device online">
                        <span>üñ≤Ô∏è Tlaƒçidlo</span>
                        <span class="device-status online">Online</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="btn btn-primary">Spusti≈• sc√©nu</button>
                    <button class="btn btn-danger">Stop</button>
                    <button class="btn btn-warning">Test zariaden√≠</button>
                </div>
            </div>
            
            <div class="room-card">
                <div class="room-header">
                    <div class="room-title">Miestnos≈• 2 - Hist√≥ria</div>
                    <div class="room-status idle">ƒåak√°</div>
                </div>
                <div class="device-list">
                    <div class="device online">
                        <span>üí° LED P√°sy</span>
                        <span class="device-status online">Online</span>
                    </div>
                    <div class="device offline">
                        <span>‚öôÔ∏è Motorƒçek</span>
                        <span class="device-status offline">Offline</span>
                    </div>
                    <div class="device online">
                        <span>üñ≤Ô∏è Tlaƒçidlo</span>
                        <span class="device-status online">Online</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="btn btn-primary">Spusti≈• sc√©nu</button>
                    <button class="btn btn-danger">Stop</button>
                    <button class="btn btn-warning">Test zariaden√≠</button>
                </div>
            </div>
            
            <div class="room-card">
                <div class="room-header">
                    <div class="room-title">Miestnos≈• 3 - Interakt√≠vna</div>
                    <div class="room-status running">Be≈æ√≠ sc√©na</div>
                </div>
                <div class="device-list">
                    <div class="device online">
                        <span>üí° RGB Svetla</span>
                        <span class="device-status online">Online</span>
                    </div>
                    <div class="device online">
                        <span>üîä Stereo Zvuk</span>
                        <span class="device-status online">Online</span>
                    </div>
                    <div class="device online">
                        <span>üìπ Projektor</span>
                        <span class="device-status online">Online</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="btn btn-primary">Spusti≈• sc√©nu</button>
                    <button class="btn btn-danger">Stop</button>
                    <button class="btn btn-warning">Test zariaden√≠</button>
                </div>
            </div>
        </div>
        
        <div class="scene-editor">
            <h2>üé¨ Editor sc√©n</h2>
            <div class="scene-form">
                <div class="form-group">
                    <label>Miestnos≈•:</label>
                    <select id="roomSelect">
                        <option value="room1">Miestnos≈• 1 - √övod</option>
                        <option value="room2">Miestnos≈• 2 - Hist√≥ria</option>
                        <option value="room3">Miestnos≈• 3 - Interakt√≠vna</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>N√°zov sc√©ny:</label>
                    <input type="text" id="sceneName" placeholder="intro, main, outro...">
                </div>
                <div class="form-group">
                    <label>ƒåas (sekundy):</label>
                    <input type="number" id="actionTime" min="0" step="0.5" placeholder="0">
                </div>
                <div class="form-group">
                    <label>Zariadenie:</label>
                    <select id="deviceSelect">
                        <option value="light">Svetlo</option>
                        <option value="audio">Zvuk</option>
                        <option value="motor">Motor</option>
                        <option value="projector">Projektor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Pr√≠kaz:</label>
                    <select id="commandSelect">
                        <option value="ON">Zapn√∫≈•</option>
                        <option value="OFF">Vypn√∫≈•</option>
                        <option value="BLINK">Blika≈•</option>
                        <option value="PLAY_WELCOME">Prehra≈• uv√≠tanie</option>
                        <option value="STOP">Zastavi≈•</option>
                    </select>
                </div>
                <div class="form-group" style="grid-column: 1 / -1;">
                    <button class="btn btn-success" onclick="addAction()">‚ûï Prida≈• akciu</button>
                    <button class="btn btn-primary" onclick="generateScene()">üìÑ Generova≈• JSON</button>
                    <button class="btn btn-warning" onclick="uploadScene()">‚¨ÜÔ∏è Nahra≈• do syst√©mu</button>
                </div>
            </div>
            
            <div class="scene-preview">
                <h3>üìã N√°hƒæad sc√©ny</h3>
                <div class="scene-timeline" id="sceneTimeline">
                    <div class="timeline-item">
                        <div class="timeline-time">0.0s</div>
                        <div class="timeline-action">üí° room1/light ‚Üí ON (Zapn√∫≈• svetlo)</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-time">2.0s</div>
                        <div class="timeline-action">üîä room1/audio ‚Üí PLAY_WELCOME (Prehra≈• uv√≠tanie)</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-time">5.0s</div>
                        <div class="timeline-action">üí° room1/light ‚Üí BLINK (Blika≈• svetlom)</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mqtt-monitor">
            <h3>üì° MQTT Monitor - Live spr√°vy</h3>
            <div id="mqttMessages">
                <div class="mqtt-message">
                    <span class="mqtt-timestamp">[14:23:15]</span> room1/light ‚Üê ON
                </div>
                <div class="mqtt-message">
                    <span class="mqtt-timestamp">[14:23:17]</span> room1/audio ‚Üê PLAY_WELCOME
                </div>
                <div class="mqtt-message">
                    <span class="mqtt-timestamp">[14:23:20]</span> room1/light ‚Üê BLINK
                </div>
                <div class="mqtt-message">
                    <span class="mqtt-timestamp">[14:23:25]</span> room2/button ‚Üê PRESSED
                </div>
                <div class="mqtt-message">
                    <span class="mqtt-timestamp">[14:23:25]</span> room2/motor ‚Üê START
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentScene = [];
        
        function addAction() {
            const room = document.getElementById('roomSelect').value;
            const time = parseFloat(document.getElementById('actionTime').value) || 0;
            const device = document.getElementById('deviceSelect').value;
            const command = document.getElementById('commandSelect').value;
            
            const action = {
                timestamp: time,
                topic: `${room}/${device}`,
                message: command
            };
            
            currentScene.push(action);
            currentScene.sort((a, b) => a.timestamp - b.timestamp);
            
            updateScenePreview();
            
            // Clear form
            document.getElementById('actionTime').value = '';
        }
        
        function updateScenePreview() {
            const timeline = document.getElementById('sceneTimeline');
            timeline.innerHTML = '';
            
            currentScene.forEach(action => {
                const item = document.createElement('div');
                item.className = 'timeline-item';
                
                const deviceIcons = {
                    light: 'üí°',
                    audio: 'üîä', 
                    motor: '‚öôÔ∏è',
                    projector: 'üìπ'
                };
                
                const device = action.topic.split('/')[1];
                const icon = deviceIcons[device] || 'üîß';
                
                item.innerHTML = `
                    <div class="timeline-time">${action.timestamp}s</div>
                    <div class="timeline-action">${icon} ${action.topic} ‚Üí ${action.message}</div>
                `;
                timeline.appendChild(item);
            });
        }
        
        function generateScene() {
            const json = JSON.stringify(currentScene, null, 2);
            
            // Create downloadable file
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${document.getElementById('roomSelect').value}_${document.getElementById('sceneName').value || 'scene'}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            console.log('Generated scene JSON:', json);
        }
        
        function uploadScene() {
            alert('Sc√©na bude nahran√° do syst√©mu! (Tu by sa pripojil na backend API)');
        }
        
        // Simulate real-time MQTT messages
        function addMqttMessage(topic, message) {
            const messagesDiv = document.getElementById('mqttMessages');
            const now = new Date();
            const timestamp = now.toTimeString().split(' ')[0];
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mqtt-message';
            messageDiv.innerHTML = `
                <span class="mqtt-timestamp">[${timestamp}]</span> ${topic} ‚Üê ${message}
            `;
            
            messagesDiv.insertBefore(messageDiv, messagesDiv.firstChild);
            
            // Keep only last 10 messages
            while (messagesDiv.children.length > 10) {
                messagesDiv.removeChild(messagesDiv.lastChild);
            }
        }
        
        // Simulate live MQTT traffic
        setInterval(() => {
            const rooms = ['room1', 'room2', 'room3'];
            const devices = ['light', 'audio', 'motor', 'button'];
            const messages = ['ON', 'OFF', 'PRESSED', 'START', 'STOP'];
            
            const room = rooms[Math.floor(Math.random() * rooms.length)];
            const device = devices[Math.floor(Math.random() * devices.length)];
            const message = messages[Math.floor(Math.random() * messages.length)];
            
            addMqttMessage(`${room}/${device}`, message);
        }, 3000);
        
        // Initialize with sample scene
        currentScene = [
            { timestamp: 0, topic: "room1/light", message: "ON" },
            { timestamp: 2, topic: "room1/audio", message: "PLAY_WELCOME" },
            { timestamp: 5, topic: "room1/light", message: "BLINK" }
        ];
        updateScenePreview();
    </script>
</body>
</html>